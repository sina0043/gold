import{a as H}from"./chunk-VZCX67DG.js";import{a as U}from"./chunk-34CNDDXC.js";import{a as F}from"./chunk-WHMI3XXP.js";import{a as T}from"./chunk-M6BKKOPP.js";import{a as J}from"./chunk-AHHFRPXG.js";import{C as O,D as R,W as L,d as k,la as G,ma as E,p as Q,ta as z,va as x}from"./chunk-MGRJPO3X.js";import{Aa as B,Ab as m,Da as s,Jb as A,Oa as f,Ob as a,Pb as w,Qb as _,Ua as q,X as c,aa as C,ba as S,dc as b,fc as y,gb as h,gc as N,hb as g,jb as M,kb as V,lb as d,mb as e,nb as n,ob as l,vb as v,zb as u}from"./chunk-JON7ULIB.js";var I=class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-shopping-card-loading"]],decls:16,vars:0,consts:[[1,"flex","flex-col","sm:flex-row","p-3","bg-surface-0","dark:bg-surface-900","rounded-lg","shadow-sm"],[1,"w-full","sm:w-32","md:w-40","relative","flex-shrink-0","flex","justify-center"],["width","120px","height","120px",1,"rounded-lg"],[1,"flex","flex-col","sm:flex-row","justify-between","sm:items-center","flex-1","gap-3","sm:gap-6"],[1,"flex","flex-col","sm:flex-col","justify-between","h-full","gap-2"],["width","6rem","height","1rem"],["width","10rem","height","1.5rem",1,"mt-1","sm:mt-2"],[1,"gap-0","d-ltr","mt-2","hidden","sm:flex","ml-auto"],["width","2.5rem","height","2.5rem",1,"!rounded-none","!border-r-0"],["width","2.5rem","height","2.5rem",1,"!rounded-none"],["width","2.5rem","height","2.5rem",1,"!rounded-none","!border-l-0"],[1,"flex","flex-col","justify-between","h-full","gap-1","text-right"],["width","5rem","height","1rem"],[1,"flex","items-baseline","gap-1"],["width","8rem","height","1.5rem"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1),l(2,"p-skeleton",2),n(),e(3,"div",3)(4,"div",4),l(5,"p-skeleton",5)(6,"p-skeleton",6),e(7,"div",7),l(8,"p-skeleton",8)(9,"p-skeleton",9)(10,"p-skeleton",10),n()(),e(11,"div",11),l(12,"p-skeleton",12)(13,"p-skeleton",12),e(14,"div",13),l(15,"p-skeleton",14),n()()()())},dependencies:[x,E],encapsulation:2})};function ee(t,r){if(t&1){let i=v();e(0,"p-button",20),u("click",function(){C(i);let p=m();return S(p.decreaseQuantity())}),n()}}function te(t,r){if(t&1){let i=v();e(0,"p-button",21),u("click",function(){C(i);let p=m();return S(p.confirmRemove())}),n()}}function ie(t,r){if(t&1){let i=v();e(0,"p-button",20),u("click",function(){C(i);let p=m();return S(p.decreaseQuantity())}),n()}}function ne(t,r){if(t&1){let i=v();e(0,"p-button",21),u("click",function(){C(i);let p=m();return S(p.confirmRemove())}),n()}}var D=class t{messageService=c(Q);shareDataService=c(T);item;shoppingListService=c(F);increaseQuantity(){this.item.quantity+=1,this.shoppingListService.updateQuantity(this.item.id,this.item.quantity),this.shareDataService.shoppingListChanged$.next()}decreaseQuantity(){this.item.quantity>1&&(this.item.quantity-=1,this.shoppingListService.updateQuantity(this.item.id,this.item.quantity),this.shareDataService.shoppingListChanged$.next())}confirmRemove(){this.shoppingListService.remove(this.item.id),this.messageService.add({severity:"info",detail:"\u0645\u062D\u0635\u0648\u0644 \u0627\u0632 \u0644\u06CC\u0633\u062A \u062E\u0631\u06CC\u062F \u062D\u0630\u0641 \u0634\u062F"}),this.shareDataService.shoppingListChanged$.next()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-shopping-list-card"]],inputs:{item:"item"},decls:34,vars:16,consts:[[1,"flex","flex-col","sm:flex-row"],[1,"w-full","sm:w-32","md:w-40","relative","flex-shrink-0"],[1,"block","mx-auto","rounded-lg","!w-[130px]","sm:w-full","sm:mr-0",3,"src","alt"],[1,"text-center","mt-4","block","sm:hidden"],[1,"d-ltr"],["icon","pi pi-minus","outlined","","styleClass","!border-r-0"],["icon","pi pi-trash","outlined","","styleClass","!border-r-0"],["outlined","","styleClass","min-w-[45px] !border-l-0",3,"label"],["icon","pi pi-plus","outlined","","styleClass","!border-l-0",3,"click"],[1,"flex","flex-col","sm:flex-row","justify-between","sm:items-center","flex-1","gap-3","sm:gap-6"],[1,"flex","flex-col","sm:flex-col","justify-between","h-full","gap-2"],[1,"font-medium","text-secondary","text-sm"],[1,"text-lg","font-medium","text-surface-900","dark:text-surface-0","mt-1","sm:mt-2"],[1,"d-ltr","mt-2","sm:mt-4","hidden","sm:block","ml-auto"],[1,"flex","flex-col","justify-between","h-full","gap-1","text-right"],[1,"text-surface-500","text-sm"],[1,"mt-1","flex","items-baseline","gap-1"],[1,"font-semibold","text-surface-900","dark:text-surface-0"],[1,"custom-toman"],[1,"overlay-n"],["icon","pi pi-minus","outlined","","styleClass","!border-r-0",3,"click"],["icon","pi pi-trash","outlined","","styleClass","!border-r-0",3,"click"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1),l(2,"img",2),e(3,"div",3)(4,"p-buttongroup",4),h(5,ee,1,0,"p-button",5)(6,te,1,0,"p-button",6),l(7,"p-button",7),e(8,"p-button",8),u("click",function(){return o.increaseQuantity()}),n()()()(),e(9,"div",9)(10,"div",10)(11,"span",11),a(12),n(),e(13,"div",12),a(14),n(),e(15,"p-buttongroup",13),h(16,ie,1,0,"p-button",5)(17,ne,1,0,"p-button",6),l(18,"p-button",7),e(19,"p-button",8),u("click",function(){return o.increaseQuantity()}),n()()(),e(20,"div",14)(21,"p",15),a(22),n(),e(23,"p",15),a(24),n(),e(25,"div",16)(26,"span",17),a(27),b(28,"currency"),n(),e(29,"span",18),a(30,"\u062A\u0648\u0645"),e(31,"span",19),a(32,"\u0646"),n(),a(33,"\u0627"),n()()()()()),i&2&&(s(2),d("src","assets/image/gold/"+o.item.image,B)("alt",o.item.name),s(3),g(o.item.quantity>1?5:6),s(2),d("label",o.item.quantity),s(5),w(o.item.category),s(2),w(o.item.name),s(2),g(o.item.quantity>1?16:17),s(2),d("label",o.item.quantity),s(4),_("\u0648\u0632\u0646: ",o.item.weight),s(2),_("\u0627\u062C\u0631\u062A: ",o.item.fee),s(3),w(y(28,11,o.item.price," ","symbol","1.0-0")))},dependencies:[x,R,z,k],encapsulation:2})};var P=class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-shopping-cart-summary-loading"]],decls:17,vars:0,consts:[[1,"w-full","xl:w-[380px]","flex-shrink-0"],[1,"sticky","top-4"],[1,"p-4"],[1,"flex","justify-between","mb-3"],["width","120px","height","1.2rem"],[1,"flex","items-baseline","gap-2"],["width","80px","height","1.2rem"],["width","140px","height","1.2rem"],[1,"flex","justify-between","border-t","border-surface-200","dark:border-surface-700","pt-3","mt-3"],["width","100px","height","1.2rem"],[1,"mt-5"],["width","100%","height","2.5rem",1,"rounded"]],template:function(i,o){i&1&&(e(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"div",3),l(4,"p-skeleton",4),e(5,"div",5),l(6,"p-skeleton",6),n()(),e(7,"div",3),l(8,"p-skeleton",7),e(9,"div",5),l(10,"p-skeleton",6),n()(),e(11,"div",8),l(12,"p-skeleton",9),e(13,"div",5),l(14,"p-skeleton",6),n()(),e(15,"div",10),l(16,"p-skeleton",11),n()()()())},dependencies:[x,L,E],encapsulation:2})};var W=(t,r)=>r.id;function re(t,r){t&1&&l(0,"div",10)}function ae(t,r){if(t&1&&(e(0,"div"),l(1,"app-shopping-list-card",9),h(2,re,1,0,"div",10),n()),t&2){let i=r.$implicit,o=r.$index,p=r.$count;s(),d("item",i),s(),g(o!==p-1?2:-1)}}function le(t,r){t&1&&(e(0,"p",8),a(1,"\u0645\u062D\u0635\u0648\u0644\u06CC \u062F\u0631 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F"),n())}function se(t,r){if(t&1&&M(0,ae,3,2,"div",null,W,!1,le,2,0,"p",8),t&2){let i=m().$implicit;V(i)}}function pe(t,r){t&1&&l(0,"div",10)}function me(t,r){if(t&1&&(e(0,"div"),l(1,"app-shopping-card-loading"),h(2,pe,1,0,"div",10),n()),t&2){let i=r.$index,o=r.$count;s(2),g(i!==o-1?2:-1)}}function de(t,r){t&1&&(e(0,"p",8),a(1,"\u0645\u062D\u0635\u0648\u0644\u06CC \u062F\u0631 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F"),n())}function ue(t,r){if(t&1&&M(0,me,3,1,"div",null,W,!1,de,2,0,"p",8),t&2){let i=m().$implicit;V(i)}}function ce(t,r){if(t&1&&(e(0,"div",7),h(1,se,3,1)(2,ue,3,1),n()),t&2){let i=m();s(),g(i.isLoaded?1:2)}}function fe(t,r){if(t&1){let i=v();e(0,"div",6)(1,"div",11)(2,"p-card",12)(3,"div",13)(4,"span",14),a(5),n(),e(6,"div",15)(7,"span",16),a(8),b(9,"currency"),n(),e(10,"span",17),a(11,"\u062A\u0648\u0645"),e(12,"span",18),a(13,"\u0646"),n(),a(14,"\u0627"),n()()(),e(15,"div",13)(16,"span",19),a(17," \u062A\u062E\u0641\u06CC\u0641 \u0634\u0645\u0627 \u0627\u0632 \u0627\u06CC\u0646 \u062E\u0631\u06CC\u062F "),n(),e(18,"div",15)(19,"span",20),a(20),b(21,"currency"),n(),e(22,"span",17),a(23,"\u062A\u0648\u0645"),e(24,"span",18),a(25,"\u0646"),n(),a(26,"\u0627"),n()()(),e(27,"div",21)(28,"span",14),a(29," \u062C\u0645\u0639 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F "),n(),e(30,"div",15)(31,"span",22),a(32),b(33,"currency"),n(),e(34,"span",17),a(35,"\u062A\u0648\u0645"),e(36,"span",18),a(37,"\u0646"),n(),a(38,"\u0627"),n()()(),e(39,"button",23),u("click",function(){C(i),m();let p=A(10);return S(p.showDialog())}),n()()()()}if(t&2){let i=m();s(5),_(" \u0642\u06CC\u0645\u062A \u06A9\u0627\u0644\u0627\u0647\u0627 (",i.totalItems,") "),s(3),_(" ",y(9,5,i.totalPrice," ","symbol","1.0-0")," "),s(12),_(" ",y(21,10,i.discount," ","symbol","1.0-0")," "),s(12),_(" ",y(33,15,i.finalPrice," ","symbol","1.0-0")," "),s(7),d("disabled",i.finalPrice===0)}}function he(t,r){t&1&&l(0,"app-shopping-cart-summary-loading")}var K=class t{shoppingListService=c(F);shareDataService=c(T);platformService=c(J);BreadcrumbItems;products=[];isLoaded=!1;cart=[];totalPrice=0;totalItems=0;discount=0;finalPrice=0;ngOnInit(){this.BreadcrumbItems=[{label:"\u0644\u06CC\u0633\u062A \u062E\u0631\u06CC\u062F"}],setTimeout(()=>{this.isLoaded=!0},1e3),this.loadProducts(),this.updateCartSummary(),this.shareDataService.shoppingListChanged$.subscribe(()=>{this.loadProducts(),this.updateCartSummary()})}loadProducts(){this.products=this.shoppingListService.getList()}updateCartSummary(){if(this.platformService.isServer())return;let r=localStorage.getItem("shopping-list");r&&(this.cart=JSON.parse(r),this.totalItems=this.cart.reduce((i,o)=>i+(o.quantity||1),0),this.totalPrice=this.cart.reduce((i,o)=>i+o.price*(o.quantity||1),0),this.discount=Math.floor(this.totalPrice*.01),this.finalPrice=this.totalPrice-this.discount)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=f({type:t,selectors:[["app-shopping-list"]],decls:11,vars:3,consts:[["list",""],["loginComp",""],[3,"items"],[1,"min-h-[45vh]","flex","flex-col","xl:flex-row","gap-8"],[1,"flex-1"],[3,"value"],[1,"w-full","xl:w-[380px]","flex-shrink-0"],[1,"flex","flex-col"],[1,"text-surface-500","whitespace-nowrap"],[3,"item"],[1,"border-b","border-surface-200","dark:border-surface-700","my-4"],[1,"sticky","top-4"],[1,"p-4"],[1,"flex","justify-between","mb-3"],[1,"text-surface-700","dark:text-surface-300"],[1,"flex","items-baseline"],[1,"font-medium","text-surface-900","dark:text-surface-0"],[1,"custom-toman"],[1,"overlay-n"],[1,"text-baseGoldColor"],[1,"font-medium","text-baseGoldColor"],[1,"flex","justify-between","border-t","border-surface-200","dark:border-surface-700","pt-3","mt-3"],[1,"font-bold","text-lg","text-surface-900","dark:text-surface-0"],["pButton","","outlined","","type","button","label","\u062A\u0627\u06CC\u06CC\u062F \u0648 \u062A\u06A9\u0645\u06CC\u0644 \u0633\u0641\u0627\u0631\u0634",1,"w-full","mt-5",3,"click","disabled"]],template:function(i,o){i&1&&(l(0,"app-breadcrumb",2),e(1,"div",3)(2,"div",4)(3,"p-card")(4,"p-dataview",5),q(5,ce,3,1,"ng-template",null,0,N),n()()(),h(7,fe,40,20,"div",6)(8,he,1,0,"app-shopping-cart-summary-loading"),n(),l(9,"app-login",null,1)),i&2&&(d("items",o.BreadcrumbItems),s(4),d("value",o.products),s(3),g(o.isLoaded?7:8))},dependencies:[x,O,L,G,U,D,I,H,P,k],encapsulation:2})};export{K as ShoppingList};
