import{a as $}from"./chunk-WHMI3XXP.js";import{a as B}from"./chunk-M6BKKOPP.js";import{a as U}from"./chunk-AHHFRPXG.js";import{C as V,d as A,ia as K,ka as N,va as P,x as j}from"./chunk-MGRJPO3X.js";import{Aa as S,Da as o,Kb as F,Oa as T,Ob as u,Pb as c,Qb as x,S as I,Ua as _,Wb as O,X as l,Xa as C,a as h,aa as f,b as g,ba as v,dc as D,fc as k,gb as W,gc as y,hb as E,lb as a,mb as s,na as w,nb as r,ob as p,vb as L,zb as b}from"./chunk-JON7ULIB.js";var m=class n{platformService=l(U);storageKey="wishlist";getList(){if(this.platformService.isServer())return[];let t=localStorage.getItem(this.storageKey);return t?JSON.parse(t):[]}add(t){if(this.platformService.isServer())return;let e=this.getList();e.find(d=>d.id===t.id)||(e.push(t),localStorage.setItem(this.storageKey,JSON.stringify(e)))}remove(t){if(this.platformService.isServer())return;let e=this.getList().filter(i=>i.id!==t);localStorage.setItem(this.storageKey,JSON.stringify(e))}isInList(t){return this.platformService.isServer()?!1:this.getList().some(e=>e.id===t)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})};var G=()=>({"max-width":"640px"});function R(n,t){if(n&1&&p(0,"img",22),n&2){let e=t.$implicit;a("src","/image/gold/"+e.id,S)("alt",e.id)}}function q(n,t){if(n&1&&p(0,"img",23),n&2){let e=t.$implicit;a("src","/image/gold/"+e.id,S)("alt",e.id)}}function H(n,t){n&1&&p(0,"p-tag",24),n&2&&F("left",4,"px")("top",4,"px")}var J=class n{shoppingListService=l($);wishlistService=l(m);shareDataService=l(B);product;inShoppinglist=!1;inWishlist=!1;addToShoppinglist=new C;addToWishlist=new C;ngOnChanges(t){t.product&&this.product&&this.product.id&&(this.inShoppinglist=this.shoppingListService.isInList(this.product.id),this.inWishlist=this.wishlistService.isInList(this.product.id),this.product.isInWishList=this.inWishlist)}toggleShoppinglist(){if(this.inShoppinglist)this.shoppingListService.remove(this.product.id);else{let t=g(h({},this.product),{image:this.product.images?.[0]?.id});this.shoppingListService.add(t)}this.inShoppinglist=!this.inShoppinglist,this.addToShoppinglist.emit({product:g(h({},this.product),{image:this.product.images?.[0]?.id}),inShoppinglist:this.inShoppinglist}),this.shareDataService.shoppingListChanged$.next()}toggleWishlist(){this.inWishlist?(this.wishlistService.remove(this.product.id),this.inWishlist=!1,this.product.isInWishList=!1):(this.wishlistService.add(this.product),this.inWishlist=!0,this.product.isInWishList=!0),this.addToWishlist.emit({product:this.product,inWishlist:this.inWishlist}),this.shareDataService.wishlistChanged$.next()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=T({type:n,selectors:[["app-card"]],inputs:{product:"product"},outputs:{addToShoppinglist:"addToShoppinglist",addToWishlist:"addToWishlist"},features:[w],decls:35,vars:21,consts:[["item",""],["thumbnail",""],[1,"p-3","border","border-surface-200","dark:border-surface-700","bg-bgGlasses","rounded","flex","flex-col","xs:m-auto"],[1,"flex","justify-center","rounded","pt-1"],[1,"relative","mx-auto","d-ltr"],[3,"value","containerStyle","numVisible","activeIndex"],["value","\u0627\u062A\u0645\u0627\u0645 \u0645\u0648\u062C\u0648\u062F\u06CC","severity","danger",1,"absolute","!text-[#b91c1c]",3,"left","top"],[1,"pt-6"],[1,"flex","justify-between","items-center"],[1,"text-lg","font-medium"],[1,"bg-surface-100","p-1",2,"border-radius","30px","height","100%"],[1,"bg-surface-0","flex","products-center","gap-2","justify-center","py-1","px-2",2,"border-radius","30px","box-shadow","0px 1px 2px 0px rgba(0,0,0,0.04), 0px 1px 2px 0px rgba(0,0,0,0.06)"],[1,"text-surface-900","font-medium","text-sm"],[1,"pi","pi-star-fill","text-yellow-500"],[1,"text-surface-500","mt-4"],[1,"mt-4"],[1,"font-semibold","mt-4"],[1,"custom-toman"],[1,"overlay-n"],[1,"flex","gap-2","mt-4"],["outlined","","pButton","",1,"flex-auto","whitespace-nowrap","!text-[14px]","d-ltr",3,"click","icon","label","disabled"],["pButton","","tooltipPosition","left","outlined","",3,"click","pTooltip","icon"],[1,"w-full","h-[200px]",3,"src","alt"],[1,"max-h-[50px]",3,"src","alt"],["value","\u0627\u062A\u0645\u0627\u0645 \u0645\u0648\u062C\u0648\u062F\u06CC","severity","danger",1,"absolute","!text-[#b91c1c]"]],template:function(e,i){if(e&1){let d=L();s(0,"div",2)(1,"div",3)(2,"div",4)(3,"p-galleria",5),_(4,R,1,2,"ng-template",null,0,y)(6,q,1,2,"ng-template",null,1,y),r(),W(8,H,1,4,"p-tag",6),r()(),s(9,"div",7)(10,"div",8)(11,"div",9),u(12),r(),s(13,"div",10)(14,"div",11)(15,"span",12),u(16),r(),p(17,"i",13),r()()(),s(18,"p",14),u(19),r(),s(20,"p",14),u(21),r(),s(22,"div",15),u(23,"\u0642\u06CC\u0645\u062A \u0646\u0647\u0627\u06CC\u06CC : "),s(24,"span",16),u(25),D(26,"currency"),r(),s(27,"span",17),u(28," \u062A\u0648\u0645"),s(29,"span",18),u(30,"\u0646"),r(),u(31,"\u0627 "),r()(),s(32,"div",19)(33,"button",20),b("click",function(){return f(d),v(i.toggleShoppinglist())}),r(),s(34,"button",21),b("click",function(){return f(d),v(i.toggleWishlist())}),r()()()()}e&2&&(o(3),a("value",i.product==null?null:i.product.images)("containerStyle",O(20,G))("numVisible",3)("activeIndex",i.product==null?null:i.product.activeIndex),o(5),E((i.product==null?null:i.product.inventoryStatus)==="OUTOFSTOCK"?8:-1),o(4),c(i.product==null?null:i.product.name),o(4),c(i.product==null?null:i.product.rating),o(3),x("\u0648\u0632\u0646: ",i.product==null?null:i.product.weight),o(2),x("\u0627\u062C\u0631\u062A: ",i.product==null?null:i.product.fee),o(4),c(k(26,15,i.product==null?null:i.product.price," ","symbol","1.0-0")),o(8),a("icon",i.inShoppinglist?"pi pi-cart-arrow-down":"pi pi-shopping-cart")("label",i.inShoppinglist?"\u062D\u0630\u0641 \u0627\u0632 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F")("disabled",(i.product==null?null:i.product.inventoryStatus)==="OUTOFSTOCK"),o(),a("pTooltip",i.product!=null&&i.product.isInWishList?"\u062D\u0630\u0641 \u0627\u0632 \u0644\u06CC\u0633\u062A \u0639\u0644\u0627\u0642\u0647 \u0645\u0646\u062F\u06CC \u0647\u0627":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0644\u06CC\u0633\u062A \u0639\u0644\u0627\u0642\u0647 \u0645\u0646\u062F\u06CC \u0647\u0627")("icon",i.product!=null&&i.product.isInWishList?"pi pi-heart-fill":"pi pi-heart"))},dependencies:[P,V,K,N,j,A],encapsulation:2})};export{m as a,J as b};
