<div class="register">
    @if(!isShowOtpForm) {
    <!-- فرم ثبت‌نام -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmitRegisterForm()" class="flex flex-col gap-4">
        <!-- نام و نام خانوادگی -->
        <input type="text" placeholder="نام" formControlName="firstName"
            class="p-inputtext" [pAutoFocus]="true"
            [ngClass]="{'p-invalid': isInvalid(registerForm, 'firstName')}" />
        @if(isInvalid(registerForm, 'firstName', 'required')) {
        <p-message severity="error" size="small" variant="simple">نام الزامی است</p-message>
        }
        <input type="text" placeholder="نام خانوادگی" formControlName="lastName"
            class="p-inputtext"
            [ngClass]="{'p-invalid': isInvalid(registerForm, 'lastName')}" />
        @if(isInvalid(registerForm, 'lastName', 'required')) {
        <p-message severity="error" size="small" variant="simple">نام خانوادگی الزامی است</p-message>
        }
        <!-- شماره موبایل -->
        <input type="text" placeholder="شماره موبایل" formControlName="phoneNumber"
            class="p-inputtext" maxlength="11"
            [ngClass]="{'p-invalid': isInvalid(registerForm, 'phoneNumber')}" />
        @if(isInvalid(registerForm, 'phoneNumber', 'required')) {
        <p-message severity="error" size="small" variant="simple">شماره موبایل الزامی است</p-message>
        }
        @if(isInvalid(registerForm, 'phoneNumber', 'pattern')) {
        <p-message severity="error" size="small" variant="simple">شماره موبایل معتبر نیست</p-message>
        }
        <!-- رمز عبور و تکرار -->
        <p-password placeholder="رمز عبور" formControlName="password" [toggleMask]="true" [feedback]="false"
            class="w-full" [ngClass]="{'p-invalid': isInvalid(registerForm, 'password')}" />
        @if(isInvalid(registerForm, 'password', 'required')) {
        <p-message severity="error" size="small" variant="simple">رمز عبور الزامی است</p-message>
        }
        @if(isInvalid(registerForm, 'password', 'minlength')) {
        <p-message severity="error" size="small" variant="simple">رمز عبور باید حداقل ۶ کاراکتر باشد</p-message>
        }

        <p-password placeholder="تکرار رمز عبور" formControlName="confirmPassword" [toggleMask]="true"
            [feedback]="false" class="w-full" [ngClass]="{'p-invalid': isInvalid(registerForm, 'confirmPassword')}" />
        @if(isInvalid(registerForm, 'confirmPassword', 'required')) {
        <p-message severity="error" size="small" variant="simple">تکرار رمز عبور الزامی است</p-message>
        }
        @if(registerForm.hasError('mismatch') && registerFormSubmitted) {
        <p-message severity="error" size="small" variant="simple">رمز عبور و تکرار آن یکسان نیستند</p-message>
        }
        <div class="flex items-center gap-2">
            <p-checkbox inputId="ingredient1" formControlName="accept" [binary]="true"></p-checkbox>
            <label>
                <span class="text-baseGoldColor cursor-pointer" (click)="showDialog()">قوانین</span>
                <label class="text-surface-500 cursor-pointer" for="ingredient1"> بازر را خوانده و می‌پذیرم</label>
            </label>
        </div>

        @if(registerForm.get('accept')?.hasError('required') && registerFormSubmitted) {
        <p-message severity="error" size="small" variant="simple">
            تایید قوانین اجباری است
        </p-message>
        }
        <div>
            <p-button type="submit" label="ثبت‌نام" outlined class="mt-2" styleClass="w-full"></p-button>
        </div>
    </form>
    } @else {
    <!-- فرم OTP -->
    <form [formGroup]="otpForm" (ngSubmit)="onSubmitOtpForm()" class="flex flex-col gap-4 space-y-6">
        <div class="m-auto">
            لطفا کد ارسال شده به
            <span class="font-semibold mt-4">{{ phoneNumber }}</span>
            را وارد کنید
        </div>

        <div class="flex flex-col gap-1 items-center">
            <p-inputotp formControlName="otp" [integerOnly]="true" styleClass="!bg-white/20" class="d-ltr" (keydown.enter)="onSubmitOtpForm()"
                [pAutoFocus]="true" [length]="5" />
            @if(isInvalid(otpForm, 'otp', 'required')) {
            <p-message severity="error" size="small" variant="simple">لطفا کد را وارد کنید</p-message>
            }
            @if(isInvalid(otpForm, 'otp', 'minlength')) {
            <p-message severity="error" size="small" variant="simple">کد باید ۵ رقم باشد</p-message>
            }
        </div>

        <app-timer [seconds]="120" (resendClicked)="handleResend()"></app-timer>

        <div>
            <p-button type="submit" label="تایید" outlined class="mt-2" styleClass="w-full"></p-button>
        </div>
    </form>
    }
</div>
<p-dialog [modal]="true" [(visible)]="visibleDialog" [maximizable]="true" styleClass="rules-dialog">
    <p>
        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perferendis cupiditate eum eaque distinctio culpa. Debitis, natus fuga. Minus molestias velit ea repellendus doloremque culpa deleniti alias in omnis nihil, illo sit repellat? Facilis ratione sunt sed quos eligendi cupiditate consequatur labore assumenda repellat accusantium eius fugit, quam architecto rem in possimus magnam fuga fugiat perspiciatis. Praesentium nostrum sapiente nulla cupiditate, porro, at ipsum perferendis, soluta quasi corrupti accusantium animi eos rerum adipisci? Natus eos maiores tenetur amet blanditiis nulla eveniet illo voluptatem cum, dolorem, quo hic voluptates quibusdam vel pariatur, facere quia aperiam atque exercitationem alias consequatur iusto quam vero. Architecto aliquam nam rem, ab vitae at dignissimos, nesciunt itaque veniam eius minus ex atque quidem sit laborum harum. Velit nisi officiis ad earum consequatur similique adipisci cumque accusantium omnis, voluptas deleniti. Accusantium corporis perferendis omnis vel deserunt. Optio, voluptatum, laboriosam accusamus cum, impedit facere cumque facilis laborum nisi molestiae dolores illo quia. Illo totam provident autem veritatis officiis fugiat quo quibusdam impedit, illum quisquam quis! Recusandae ex dolorem maxime consequatur? Praesentium aspernatur est repudiandae amet asperiores ratione porro? Aperiam facere incidunt provident consectetur ipsam praesentium? Nostrum nam aspernatur ullam ex velit reprehenderit perferendis modi officia eligendi blanditiis odio, quaerat explicabo, accusantium, commodi soluta eius asperiores distinctio quae? A, ex officia temporibus expedita eligendi quae corporis maxime odit omnis minima, amet exercitationem debitis eaque tempora ab ducimus unde voluptatibus suscipit, aut cumque repellat? Eligendi exercitationem fuga aperiam! Dolor iure sed possimus necessitatibus officiis ipsam eius pariatur nesciunt quibusdam culpa? Itaque dolorum soluta suscipit neque iure modi qui adipisci, tenetur ducimus libero vitae nostrum, nisi labore quis aperiam asperiores quo rerum quam rem distinctio. Aperiam harum aliquid fugit consectetur ratione facere, dolorum doloribus cum quod deserunt sit, quasi illo asperiores. Laboriosam quo nulla illum molestiae, doloremque inventore accusamus incidunt error atque laborum odio dolores eum, dolorem, iste et! Dolor repellat in deleniti soluta sed perferendis aliquid molestias iusto modi saepe cumque consequatur assumenda porro exercitationem mollitia nostrum quibusdam esse natus, culpa doloribus officia unde. Officia temporibus cum aliquid, perspiciatis fuga adipisci obcaecati odit corporis, inventore tempora accusantium voluptatibus labore, vitae eaque delectus ducimus necessitatibus hic esse eius eligendi animi? Quidem, veritatis corporis? Exercitationem tempora possimus saepe libero recusandae sunt dolorem deleniti eveniet commodi! Doloribus, sed aut architecto labore repellendus illo qui? Maiores eum eveniet nulla, totam aperiam facere perferendis accusamus quas neque impedit! Nisi eius eos molestiae cum, quas, veniam id, laborum commodi laboriosam magnam ex iste quam qui voluptatum ducimus. Illo provident, fugiat facilis eius est sunt impedit ipsam beatae harum ab numquam commodi dolores nostrum error omnis laudantium sint delectus iusto magni quo magnam nam quas? Omnis optio accusantium quisquam excepturi, at saepe doloribus veritatis quas nesciunt natus nisi dolorem ducimus eligendi beatae magni quasi placeat vitae ipsa deserunt eaque necessitatibus quidem voluptates mollitia quod? Aperiam doloremque dolorem suscipit recusandae harum sequi molestiae asperiores accusantium? Praesentium odio voluptatibus optio saepe molestiae laboriosam cum est voluptas sequi, explicabo at, nulla, ipsum incidunt quae. Ea culpa pariatur explicabo. Consectetur atque commodi hic quae nesciunt aut ex. Tempora perferendis maxime ipsa a repellat quisquam nesciunt ex? Rem doloribus cum officiis, delectus commodi est ipsa veniam rerum quaerat, sed voluptatum ipsam. Dolores, sit sed. Dolorem, facere! Tenetur culpa corrupti repudiandae in qui optio ducimus eos accusamus aut harum! Amet repudiandae veritatis iste? Necessitatibus cumque quae, quo dolor voluptatibus a magnam odio quas, officia corporis facilis sapiente quis consectetur nulla? Vero, fuga. Aliquam in neque illum quod necessitatibus corrupti aperiam. Quae distinctio eius, provident nemo impedit sit libero ad aliquid, fugit esse dicta porro sapiente dolore ullam odit ipsum saepe maiores, pariatur a vitae perferendis odio veritatis! Excepturi dolore atque perferendis ratione totam tenetur reiciendis voluptate! Natus, quas dignissimos atque laudantium expedita temporibus repellat, cum eveniet totam incidunt voluptatum sapiente qui dolorum maiores quibusdam, sunt rem. Ducimus, quas nam et debitis laudantium temporibus vitae dolores aliquam rem quia ipsum deserunt itaque alias! Illo dolor sint nihil molestias, corrupti praesentium, quidem vitae porro iure libero rem nisi, dolorum consequuntur voluptatum enim doloribus repellendus? Aut cum molestias eaque explicabo ipsa officiis blanditiis dolorem odit? Qui error odit, ipsum architecto id consequuntur illo voluptatem dicta, asperiores corporis iste harum nesciunt velit adipisci impedit excepturi blanditiis autem incidunt veniam eum non iusto eligendi reprehenderit expedita! Magnam rerum recusandae odio ipsa aliquam id dolore quasi saepe voluptatum asperiores cum, atque, qui voluptatem? Enim ipsum id nisi labore vitae quidem explicabo fugit sequi ratione excepturi quos ex dicta animi beatae repellendus, quae maxime debitis at quisquam voluptas laborum? Nam sed excepturi repellat consequuntur fugit maxime, minus reiciendis cupiditate fugiat expedita est consequatur unde quisquam nemo tempore, voluptatem sapiente doloribus reprehenderit odio. Iusto, veritatis ut! Numquam harum quas tenetur ad! Ab dolore recusandae ratione, iure quasi esse odit obcaecati! Eligendi quasi rerum, facere quo ipsam minima dolorum. Suscipit molestias cum explicabo unde quidem sed tempore repudiandae vero dolores temporibus eveniet eligendi quod est quis labore ad, ducimus aliquam iusto assumenda sapiente. Perferendis facilis ratione sit ipsum vero quod cupiditate officiis animi sint libero provident, labore quae dolorum nihil similique voluptate nam et. Asperiores, velit nemo provident vel porro fugit accusamus, inventore iusto dolorem exercitationem consequuntur labore expedita dicta! Deserunt perspiciatis eum voluptates suscipit blanditiis nostrum quaerat non praesentium, at est provident alias debitis? Incidunt dignissimos expedita necessitatibus. Doloremque repellendus enim quos magni animi inventore quibusdam, maxime doloribus illo tempore soluta sunt neque quod quam quo, dolores, labore atque ea fugiat dicta eius? Laborum possimus saepe hic! Dicta porro aperiam similique nesciunt repudiandae possimus reprehenderit magnam quaerat voluptatibus beatae quae, molestias sed, veritatis explicabo dignissimos rem aut debitis placeat atque temporibus ducimus facilis. Nihil optio non, eius ducimus iusto numquam dolores sapiente in labore sed possimus vel neque, quo unde, reiciendis dicta accusantium esse. Eligendi earum expedita, eius libero hic amet, nulla alias vitae corporis, beatae architecto voluptatum? Non, quisquam! Deserunt tenetur consequuntur omnis temporibus eveniet accusantium expedita perspiciatis eligendi consequatur magni odit modi alias sunt dolor maiores facilis laudantium placeat pariatur, iste similique illum, natus soluta commodi quam. Inventore repudiandae deserunt quasi amet optio repellendus. Molestiae similique, minus tenetur dolorem illo cumque esse voluptas alias sequi nesciunt, maxime adipisci, corporis modi repellat officiis dicta id voluptates soluta commodi quos? Deleniti pariatur aliquam sunt, molestiae obcaecati excepturi quisquam? Exercitationem quod obcaecati ex, aspernatur id dolores voluptates laborum sequi, libero animi ipsa vero nihil error quaerat, sint molestiae. Quae tempora nulla animi eveniet inventore aliquid autem beatae, molestiae voluptatem repudiandae labore assumenda, impedit fugit repellendus quasi rem sunt id ea quidem. Laudantium recusandae earum sapiente cum qui. Minima iure recusandae explicabo officiis libero iste obcaecati corporis repellendus quia sed ut, deleniti deserunt quaerat autem voluptatum odio illo aliquam ratione ab in cum. Vel error numquam harum, laborum sit voluptas id repellendus blanditiis cupiditate iusto at enim, iste rem assumenda temporibus dolore similique saepe commodi quis laboriosam laudantium fuga? Error tempore facere fugit amet, dolore est dicta nulla voluptates quis doloremque in odio nam, repellendus totam, aut autem aliquam illum iure ullam voluptatum accusamus molestiae. Sequi omnis pariatur rerum possimus assumenda quidem. Inventore totam unde iure ratione hic facere quos minima sed laudantium neque praesentium voluptate cupiditate, dolores distinctio odit dicta reprehenderit officia, repellat facilis aliquid corporis similique repudiandae est veniam. Non veniam, cupiditate fuga beatae incidunt doloribus saepe officiis. Repellat praesentium ducimus commodi, soluta et cumque illo quae deserunt alias tempore, quisquam est numquam ratione ab dolorem, perferendis officia. Omnis inventore quaerat, vero dignissimos illum, similique, numquam delectus officiis ipsum reiciendis corporis modi! Iste tempore repellat, eveniet amet quibusdam labore, quasi illum cumque eos perferendis quod magnam, dolorum accusamus incidunt repellendus voluptatem vero ducimus molestias distinctio ipsa rem accusantium deserunt odio iusto. Provident, dignissimos, officiis odio at animi, consequuntur quidem exercitationem voluptatum eveniet laboriosam minus! Omnis, at voluptatibus velit veniam eveniet optio atque doloribus. Explicabo enim voluptates fugiat perspiciatis quia doloremque, eos dolores fuga tenetur ut ex? Numquam ea voluptates explicabo hic. Eligendi, illo distinctio. Sed iusto perferendis dolorem quis. Dolore quasi omnis esse aut dolores eum libero vel magnam ullam ab? Nulla dicta vitae voluptatum illum ducimus aspernatur cupiditate ipsum iusto quibusdam corrupti sapiente commodi nostrum at soluta, accusamus molestiae dolorum modi autem temporibus obcaecati tenetur expedita dolores consequuntur. Eos laudantium quod quisquam voluptates veniam quam alias, fuga nesciunt rem. Quia praesentium porro aut odio accusamus doloribus obcaecati sapiente eius! Omnis impedit non pariatur cum, numquam assumenda fugit magni a odio eum suscipit vitae explicabo distinctio dolore ipsam enim ipsa ducimus. At voluptatem nisi aut? Dolores doloribus labore vel architecto facilis ea reiciendis doloremque expedita, minus neque eius veritatis odio! Ex quae accusamus laborum illo obcaecati veniam hic necessitatibus consequatur. Labore commodi quasi libero nemo tenetur, aut veniam, eveniet maiores cum cupiditate nisi vero dicta, ipsa dolor vel voluptatem error officia debitis. Tenetur labore at praesentium. Enim architecto doloribus non sed quod voluptate maiores fugit nihil! Alias in, inventore corrupti corporis velit suscipit minima explicabo magni tempore quo incidunt? Velit dicta neque optio corporis. Voluptates sint ipsam iste accusantium, atque asperiores non pariatur nemo, repudiandae ducimus mollitia harum quod neque ex eius modi vel velit! Cupiditate, nobis quaerat expedita perspiciatis maxime iste blanditiis quam quos quidem quo recusandae, earum numquam praesentium eius natus possimus repellat accusamus incidunt voluptate alias, quibusdam nihil eos explicabo? Nihil ut accusantium voluptas quos saepe, praesentium fugiat qui, voluptatum doloremque itaque rerum neque veritatis id quas reprehenderit possimus assumenda culpa ex magni temporibus soluta vero. Fugiat inventore ea laborum ab aspernatur debitis deleniti. Numquam odit eaque mollitia modi aut culpa magnam aliquam quo, illo qui. Eveniet laboriosam aspernatur, minima adipisci nihil fuga deserunt dolores quibusdam distinctio repellendus atque recusandae nostrum quisquam iusto ratione reprehenderit dicta. Nemo reiciendis odit provident nostrum doloremque molestiae voluptatem vel ipsa nulla enim dicta ullam praesentium, magni velit explicabo temporibus ratione obcaecati animi voluptate deleniti? Natus neque, molestias rerum placeat excepturi ullam maiores, nobis voluptatum eius, praesentium vel. Eos saepe impedit quos vero doloribus, quas voluptate in inventore aspernatur delectus obcaecati tempora enim asperiores fugiat repellat similique error repellendus culpa ipsum quidem eligendi, exercitationem veritatis! Odio dignissimos nulla consequatur. Vitae similique quae impedit obcaecati magni recusandae quo delectus eius laboriosam officiis voluptas, illum at! Nobis dolor deserunt velit quo repellendus doloribus magni dolores harum modi labore voluptatibus, earum non saepe dolorem nisi quidem excepturi impedit animi? Eveniet, ducimus quos a voluptate aut ad ea, exercitationem debitis eaque molestiae corrupti necessitatibus delectus praesentium! Nemo minima deleniti minus alias? Modi, dicta recusandae pariatur consectetur ipsa magni adipisci optio consequuntur veritatis consequatur, laudantium nihil, sunt dolore harum quidem tempore et minima quam saepe nam voluptatem quibusdam rem omnis? Perspiciatis facere possimus maxime quas ducimus asperiores, harum exercitationem, debitis odio modi temporibus earum dicta odit neque excepturi tempore aperiam deleniti veniam doloremque laboriosam id animi! Dolores officia est ut optio alias unde suscipit, repellat similique inventore. Quisquam quasi consectetur, accusamus enim labore odio blanditiis quae exercitationem ullam vitae quaerat impedit? Fugiat nesciunt explicabo nostrum ab eum laboriosam minima reprehenderit error molestias totam? Assumenda, amet deleniti voluptatem nihil dolorem odio nam consequuntur iusto nostrum itaque tenetur reprehenderit dolorum fuga qui nisi dolores quas dolor quis recusandae tempora. Minima rem debitis voluptate? Ea iste debitis minima quia culpa ab a officiis, iusto quaerat eius optio dolores repudiandae sit! Illum aspernatur totam commodi porro facilis beatae earum, unde laborum, doloribus, id nostrum. Aliquam eveniet impedit veritatis aperiam quia ratione consequuntur facere eius pariatur vero. Consectetur, excepturi eius ipsa doloribus quisquam consequuntur velit doloremque, totam dicta illum quo exercitationem delectus modi neque iure quis omnis autem dolore itaque! Nihil eius rerum quo illum nam repellat quia ex numquam, libero laudantium, dolor aperiam voluptates deserunt. Eveniet, tempora, consequatur, dolor explicabo ullam corporis amet unde magnam mollitia reiciendis eum quidem neque quos non quae ab! Velit fugiat excepturi itaque error sint doloribus laborum, dicta minima impedit, enim expedita eaque cupiditate sit provident voluptatibus cumque nihil quos ratione similique. In iusto quaerat ipsum nostrum dicta deserunt vel veritatis nisi adipisci pariatur fugit reiciendis nesciunt, rerum, incidunt doloremque dignissimos commodi minima omnis velit ipsa voluptas tempora. Quae mollitia ea provident saepe totam eveniet iure repellendus suscipit.
    </p>
</p-dialog>