<div class="reset-password">
    @if(isShowOtpForm) {
        <!-- فرم OTP -->
        <form [formGroup]="otpForm" (ngSubmit)="onSubmitOtpForm()" class="flex flex-col gap-4 space-y-6">
            <div class="m-auto">
                لطفا کد ارسال شده به
                <span class="font-semibold mt-4">{{ phoneNumber }}</span>
                را وارد کنید
            </div>

            <div class="flex flex-col gap-1 items-center">
                <p-inputotp formControlName="otp" [integerOnly]="true" styleClass="!bg-white/20" class="d-ltr" (keydown.enter)="onSubmitOtpForm()"
                    [pAutoFocus]="true" [length]="5" />
                @if(isInvalid(otpForm, 'otp', 'required')) {
                    <p-message severity="error" size="small" variant="simple" class="!mt-2 block">لطفا کد را وارد کنید</p-message>
                }
                @if(isInvalid(otpForm, 'otp', 'minlength')) {
                    <p-message severity="error" size="small" variant="simple" class="!mt-2 block">کد باید ۵ رقم باشد</p-message>
                }
            </div>

            <app-timer [seconds]="120" (resendClicked)="handleResend()"></app-timer>

            <div>
                <p-button type="submit" label="تایید" outlined class="mt-2" styleClass="w-full"></p-button>
            </div>
        </form>
    } @else {
        <!-- فرم تغییر رمز عبور -->
        <form [formGroup]="resetForm" (ngSubmit)="onSubmitResetForm()" class="flex flex-col gap-4 space-y-6">
            <div class="flex flex-col gap-3">
                <!-- رمز عبور -->
                <p-iconfield>
                    <p-inputicon class="pi pi-lock"></p-inputicon>
                    <p-password [toggleMask]="true" placeholder="کلمه عبور جدید" class="w-full" [feedback]="false" [pAutoFocus]="true"
                        formControlName="password"
                        [ngClass]="{'p-invalid': isInvalid(resetForm, 'password')}"></p-password>
                </p-iconfield>
                @if(isInvalid(resetForm, 'password', 'required')) {
                    <p-message severity="error" size="small" variant="simple" class="!mt-2 block">رمز عبور را وارد کنید</p-message>
                }
                @if(isInvalid(resetForm, 'password', 'minlength')) {
                    <p-message severity="error" size="small" variant="simple" class="!mt-2 block">رمز عبور باید حداقل ۶ کاراکتر باشد</p-message>
                }

                <!-- تکرار رمز عبور -->
                <p-iconfield>
                    <p-inputicon class="pi pi-lock"></p-inputicon>
                    <p-password [toggleMask]="true" placeholder="تکرار کلمه عبور" class="w-full" [feedback]="false"
                        formControlName="confirmPassword"
                        [ngClass]="{'p-invalid': isInvalid(resetForm, 'confirmPassword')}"></p-password>
                </p-iconfield>
                @if(isInvalid(resetForm, 'confirmPassword', 'required')) {
                    <p-message severity="error" size="small" variant="simple" class="!mt-2 block">تکرار رمز عبور الزامی است</p-message>
                }
                @if(resetForm.hasError('mismatch') && resetFormSubmitted) {
                    <p-message severity="error" size="small" variant="simple" class="!mt-2 block">
                      رمز عبور و تکرار آن یکسان نیستند
                    </p-message>
                }
            </div>

            <div>
                <p-button type="submit" label="تایید" outlined class="mt-2" styleClass="w-full"></p-button>
            </div>
        </form>
    }
</div>